# Sensor Fusion General Flow

We have a moving pedestrian. Its state is represented by a 2D position and a 2D velocity. **x** is equal to: **Px, Py, Vx, Vy**. Each time we receive new measurements from a given sensor, the estimation function process measurement is triggered.

At the first iteration, we just initialize the state and covariance matrix. Then, we call the prediction and measurement update. Before prediction we have to compute the elapsed time between the current and previous observation. Based on the elapsed time, we calculate new state transition and process covariance matrices. The measurement update depends on sensor type. If the current observations come from a radar sensor, then we have to compute the new Jacobian **Hj**, use the non-linear measurement function to project the predicted state, and call the measurement update. 

Otherwise, if the current observations are generated by a laser sensor, then we just set up the extended filter with the laser **H** and **R** matrices, and then call the measurement update.
